<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Musik Fachpraktisch - Geh√∂rbildung √úbungen</title>
    <link rel="stylesheet" href="css/style.css">
    
    <!-- VexFlow for music notation -->
    <script src="https://cdn.jsdelivr.net/npm/vexflow@4.2.2/build/cjs/vexflow.js"></script>
    
    <!-- Tone.js for professional audio -->
    <script src="https://cdn.jsdelivr.net/npm/tone@14.8.49/build/Tone.js"></script>
</head>
<body>
    <header>
        <h1>üéµ Musik Fachpraktisch - Geh√∂rbildung</h1>
        <p>Vorbereitung f√ºr fachpraktisches Abitur ‚Äì Nach Standards Baden-W√ºrttemberg</p>
    </header>

    <nav>
        <button class="nav-btn active" data-section="intervalle">Intervalle</button>
        <button class="nav-btn" data-section="akkorde">Akkorde</button>
        <button class="nav-btn" data-section="rhythmus">Rhythmusdiktat</button>
        <button class="nav-btn" data-section="melodie">Melodiediktat</button>
    </nav>

    <main>
        <!-- Intervalle Section -->
        <section id="intervalle-section" class="exercise-section active">
            <h2>Intervalle erkennen</h2>
            <p class="description">Tonraum: g bis g¬≤ (G3 bis G5). H√∂re die Intervalle und bestimme sie.</p>
            
            <div class="controls">
                <button id="play-intervall" class="btn btn-primary">‚ñ∂ Intervall abspielen</button>
            </div>

            <div id="notation-intervall" class="notation"></div>

            <div id="intervall-answer-section" class="answer-section" style="display: none;">
                <h3>W√§hle das Intervall:</h3>
                <div class="answer-grid">
                    <button class="answer-btn" onclick="checkIntervall('Kleine Sekunde')">Kleine Sekunde (k2)</button>
                    <button class="answer-btn" onclick="checkIntervall('Gro√üe Sekunde')">Gro√üe Sekunde (g2)</button>
                    <button class="answer-btn" onclick="checkIntervall('Kleine Terz')">Kleine Terz (k3)</button>
                    <button class="answer-btn" onclick="checkIntervall('Gro√üe Terz')">Gro√üe Terz (g3)</button>
                    <button class="answer-btn" onclick="checkIntervall('Reine Quarte')">Reine Quarte (r4)</button>
                    <button class="answer-btn" onclick="checkIntervall('Tritonus')">Tritonus</button>
                    <button class="answer-btn" onclick="checkIntervall('Reine Quinte')">Reine Quinte (r5)</button>
                    <button class="answer-btn" onclick="checkIntervall('Kleine Sexte')">Kleine Sexte (k6)</button>
                    <button class="answer-btn" onclick="checkIntervall('Gro√üe Sexte')">Gro√üe Sexte (g6)</button>
                    <button class="answer-btn" onclick="checkIntervall('Kleine Septime')">Kleine Septime (k7)</button>
                    <button class="answer-btn" onclick="checkIntervall('Gro√üe Septime')">Gro√üe Septime (g7)</button>
                    <button class="answer-btn" onclick="checkIntervall('Reine Oktave')">Reine Oktave (r8)</button>
                </div>
            </div>

            <div id="intervall-feedback" class="feedback"></div>
            
            <div class="controls">
                <button id="next-intervall" class="btn btn-primary" onclick="nextIntervall()" style="display: none;">N√§chstes Intervall ‚ñ∂</button>
            </div>

            <div class="stats">
                <p>Richtig: <span id="intervall-correct">0</span> | Falsch: <span id="intervall-wrong">0</span> | Gesamt: <span id="intervall-total">0</span></p>
            </div>
        </section>

        <!-- Akkorde Section -->
        <section id="akkorde-section" class="exercise-section">
            <h2>Akkorde erkennen</h2>
            <p class="description">9 Akkorde: D, M, √º, D7, Dmaj7, M7, v7, D5/6, M5/6. 4-stimmig, Grundstellung, enge Lage.</p>
            
            <div class="controls">
                <button id="play-akkord" class="btn btn-primary">‚ñ∂ Akkord abspielen</button>
            </div>

            <div id="notation-akkord" class="notation"></div>

            <div id="akkord-answer-section" class="answer-section" style="display: none;">
                <h3>W√§hle den Akkord:</h3>
                <div class="answer-grid">
                    <button class="answer-btn" onclick="checkAkkord('Durdreiklang')">Durdreiklang (D)</button>
                    <button class="answer-btn" onclick="checkAkkord('Molldreiklang')">Molldreiklang (M)</button>
                    <button class="answer-btn" onclick="checkAkkord('√úberm√§√üiger Dreiklang')">√úberm√§√üiger Dreiklang (√º)</button>
                    <button class="answer-btn" onclick="checkAkkord('D7')">Dominantseptakkord (D7)</button>
                    <button class="answer-btn" onclick="checkAkkord('Dmaj7')">Dur mit gro√üer Septime (Dmaj7)</button>
                    <button class="answer-btn" onclick="checkAkkord('M7')">Moll mit kleiner Septime (M7)</button>
                    <button class="answer-btn" onclick="checkAkkord('v7')">Verminderter Septakkord (v7)</button>
                    <button class="answer-btn" onclick="checkAkkord('D56')">Dur mit gro√üer Sexte (D5/6)</button>
                    <button class="answer-btn" onclick="checkAkkord('M56')">Moll mit gro√üer Sexte (M5/6)</button>
                </div>
            </div>

            <div id="akkord-feedback" class="feedback"></div>
            
            <div class="controls">
                <button id="next-akkord" class="btn btn-primary" onclick="nextAkkord()" style="display: none;">N√§chster Akkord ‚ñ∂</button>
            </div>

            <div class="stats">
                <p>Richtig: <span id="akkord-correct">0</span> | Falsch: <span id="akkord-wrong">0</span> | Gesamt: <span id="akkord-total">0</span></p>
            </div>
        </section>

        <!-- Rhythmus Section -->
        <section id="rhythmus-section" class="exercise-section">
            <h2>Rhythmusdiktat</h2>
            <p class="description">4 Takte im 4/4-Takt. Tempo: Viertel = 60 BPM. Nach offiziellen BW-Rhythmus-Bausteinen.</p>
            
            <div class="controls">
                <button id="play-rhythmus" class="btn btn-primary" onclick="playRhythmus()">‚ñ∂ Abspielen (1-4)</button>
                <button id="continue-rhythmus" class="btn" onclick="continueRhythmus()" style="display: none;">‚ñ∂ Weiter</button>
            </div>

            <div id="notation-rhythmus" class="notation"></div>

            <div id="rhythmus-feedback" class="feedback"></div>
            
            <div class="controls">
                <button id="show-rhythmus-solution" class="btn" onclick="showRhythmusSolution()" style="display: none;">L√∂sung anzeigen</button>
                <button id="next-rhythmus" class="btn btn-secondary" onclick="nextRhythmus()" style="display: none;">Neuer Rhythmus</button>
            </div>

            <div class="stats">
                <p>Ge√ºbt: <span id="rhythmus-total">0</span></p>
            </div>
        </section>

        <!-- Melodie Section -->
        <section id="melodie-section" class="exercise-section">
            <h2>Melodiediktat</h2>
            <p class="description">4 Takte im 4/4-Takt mit Kadenz. Leitereigene T√∂ne. Ambitus √ºber 1 Oktave.</p>
            <p id="melodie-info" style="text-align: center; color: #7f8c8d; margin-bottom: 1rem;">Tonart wird beim Start angezeigt</p>
            
            <div class="controls">
                <button id="play-melodie" class="btn btn-primary" onclick="playMelodie()">‚ñ∂ Abspielen (Kadenz + 1-4)</button>
                <button id="continue-melodie" class="btn" onclick="continueMelodie()" style="display: none;">‚ñ∂ Weiter</button>
            </div>

            <div id="notation-melodie" class="notation"></div>

            <div id="melodie-feedback" class="feedback"></div>
            
            <div class="controls">
                <button id="show-melodie-solution" class="btn" onclick="showMelodieSolution()" style="display: none;">L√∂sung anzeigen</button>
                <button id="next-melodie" class="btn btn-secondary" onclick="nextMelodie()" style="display: none;">Neue Melodie</button>
            </div>

            <div class="stats">
                <p>Ge√ºbt: <span id="melodie-total">0</span></p>
            </div>
        </section>
    </main>

    <footer>
        <p>¬© 2026 Musik Fachpraktisch Geh√∂rbildungstrainer ‚Äì Viel Erfolg beim √úben! üé∂</p>
    </footer>

    <!-- Load scripts in order -->
    <script src="js/audio-tonejs.js"></script>
    <script src="js/notation.js"></script>
    <script src="js/intervalle-tonejs.js"></script>
    <script src="js/akkorde-tonejs.js"></script>
    <script src="js/rhythmus-tonejs.js"></script>
    <script src="js/melodie-tonejs.js"></script>
    <script src="js/app.js"></script>
</body>
</html>