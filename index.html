<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Musik Fachpraktisch - Geh√∂rbildung</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/themes.css">
</head>
<body>
    <div id="app">
        <!-- Willkommensbildschirm -->
        <div id="welcome-screen" class="screen active">
            <div class="container">
                <h1>üéµ Geh√∂rbildungstrainer</h1>
                <p class="subtitle">Fachpraktisches Abitur BW - Musik LK</p>
                
                <div class="exercise-grid">
                    <button class="exercise-card" onclick="startExercise('intervalle')">
                        <div class="card-icon">üéº</div>
                        <h2>Intervalle</h2>
                        <p>12 Intervalle (k2 bis r8)</p>
                    </button>
                    
                    <button class="exercise-card" onclick="startExercise('akkorde')">
                        <div class="card-icon">üéπ</div>
                        <h2>Akkorde</h2>
                        <p>9 Akkorde (4-stimmig)</p>
                    </button>
                    
                    <button class="exercise-card" onclick="startExercise('melodie')">
                        <div class="card-icon">üé∂</div>
                        <h2>Melodiediktat</h2>
                        <p>4 Takte, bis 3 Vorzeichen</p>
                    </button>
                    
                    <button class="exercise-card" onclick="startExercise('rhythmus')">
                        <div class="card-icon">ü•Å</div>
                        <h2>Rhythmusdiktat</h2>
                        <p>4 Takte, 4/4-Takt</p>
                    </button>
                    
                    <button class="exercise-card settings-card" onclick="openSettings()">
                        <div class="card-icon">‚öôÔ∏è</div>
                        <h2>Einstellungen</h2>
                        <p>Theme anpassen</p>
                    </button>
                </div>
            </div>
        </div>

        <!-- Einstellungen -->
        <div id="settings-screen" class="screen">
            <div class="container">
                <button class="back-button" onclick="goHome()">‚Üê Zur√ºck</button>
                
                <h1>‚öôÔ∏è Einstellungen</h1>
                
                <div class="exercise-area">
                    <h2>Theme ausw√§hlen</h2>
                    <div class="theme-grid">
                        <button class="theme-btn" onclick="setTheme('dark')">
                            <div class="theme-preview dark-preview"></div>
                            <span>Dunkel</span>
                        </button>
                        
                        <button class="theme-btn" onclick="setTheme('light')">
                            <div class="theme-preview light-preview"></div>
                            <span>Hell</span>
                        </button>
                        
                        <button class="theme-btn" onclick="setTheme('besch')">
                            <div class="theme-preview besch-preview"></div>
                            <span>Besch (Vanessa Modus)</span>
                        </button>
                        
                        <button class="theme-btn" onclick="setTheme('pastel-pink')">
                            <div class="theme-preview pastel-pink-preview"></div>
                            <span>Pastell Rosa</span>
                        </button>
                        
                        <button class="theme-btn" onclick="setTheme('pastel-blue')">
                            <div class="theme-preview pastel-blue-preview"></div>
                            <span>Pastell Blau</span>
                        </button>
                        
                        <button class="theme-btn" onclick="setTheme('pastel-green')">
                            <div class="theme-preview pastel-green-preview"></div>
                            <span>Pastell Gr√ºn</span>
                        </button>
                        
                        <button class="theme-btn" onclick="setTheme('pastel-purple')">
                            <div class="theme-preview pastel-purple-preview"></div>
                            <span>Pastell Lila</span>
                        </button>
                        
                        <button class="theme-btn" onclick="setTheme('pastel-orange')">
                            <div class="theme-preview pastel-orange-preview"></div>
                            <span>Pastell Orange</span>
                        </button>
                    </div>
                    
                    <p style="margin-top: 30px; text-align: center; color: var(--text-secondary);">
                        <em>Deine Auswahl wird gespeichert</em>
                    </p>
                </div>
            </div>
        </div>

        <!-- Intervall-√úbung -->
        <div id="intervalle-screen" class="screen">
            <div class="container">
                <button class="back-button" onclick="goHome()">‚Üê Zur√ºck</button>
                
                <h1>Intervalle erkennen</h1>
                
                <div class="stats-bar">
                    <span>Richtig: <strong id="intervall-correct">0</strong></span>
                    <span>Falsch: <strong id="intervall-wrong">0</strong></span>
                    <span>Gesamt: <strong id="intervall-total">0</strong></span>
                </div>

                <div class="exercise-area">
                    <div class="info-box">
                        <p><strong>Tonraum:</strong> g bis g¬≤ (G3 bis G5)</p>
                        <p><em>Diktiermodus: Erst einzeln, dann zusammen</em></p>
                    </div>

                    <div id="notation-intervall" class="notation-display"></div>
                    
                    <div class="controls">
                        <button class="btn-primary" id="play-intervall" onclick="playIntervall()">‚ñ∂ Abspielen</button>
                        <button class="btn-secondary" id="replay-intervall" onclick="playIntervall()" disabled>üîÑ Wiederholen</button>
                    </div>

                    <div class="answer-section" id="intervall-answer-section" style="display: none;">
                        <h3>Welches Intervall h√∂rst du?</h3>
                        <div class="button-grid">
                            <button class="answer-btn" onclick="checkIntervall('Kleine Sekunde')">Kleine Sekunde (k2)</button>
                            <button class="answer-btn" onclick="checkIntervall('Gro√üe Sekunde')">Gro√üe Sekunde (g2)</button>
                            <button class="answer-btn" onclick="checkIntervall('Kleine Terz')">Kleine Terz (k3)</button>
                            <button class="answer-btn" onclick="checkIntervall('Gro√üe Terz')">Gro√üe Terz (g3)</button>
                            <button class="answer-btn" onclick="checkIntervall('Reine Quarte')">Reine Quarte (r4)</button>
                            <button class="answer-btn" onclick="checkIntervall('Tritonus')">Tritonus</button>
                            <button class="answer-btn" onclick="checkIntervall('Reine Quinte')">Reine Quinte (r5)</button>
                            <button class="answer-btn" onclick="checkIntervall('Kleine Sexte')">Kleine Sexte (k6)</button>
                            <button class="answer-btn" onclick="checkIntervall('Gro√üe Sexte')">Gro√üe Sexte (g6)</button>
                            <button class="answer-btn" onclick="checkIntervall('Kleine Septime')">Kleine Septime (k7)</button>
                            <button class="answer-btn" onclick="checkIntervall('Gro√üe Septime')">Gro√üe Septime (g7)</button>
                            <button class="answer-btn" onclick="checkIntervall('Reine Oktave')">Reine Oktave (r8)</button>
                        </div>
                    </div>

                    <div class="feedback" id="intervall-feedback"></div>
                    
                    <button class="btn-primary" id="next-intervall" onclick="nextIntervall()" style="display: none;">N√§chstes Intervall ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Akkord-√úbung -->
        <div id="akkorde-screen" class="screen">
            <div class="container">
                <button class="back-button" onclick="goHome()">‚Üê Zur√ºck</button>
                
                <h1>Akkorde erkennen</h1>
                
                <div class="stats-bar">
                    <span>Richtig: <strong id="akkord-correct">0</strong></span>
                    <span>Falsch: <strong id="akkord-wrong">0</strong></span>
                    <span>Gesamt: <strong id="akkord-total">0</strong></span>
                </div>

                <div class="exercise-area">
                    <div class="info-box">
                        <p><strong>Tonraum:</strong> g bis c¬≥ (G3 bis C6)</p>
                        <p><strong>Lage:</strong> Grundstellung, enge Lage, 4-stimmig</p>
                        <p><em>Diktiermodus: Erst einzeln, dann zusammen</em></p>
                    </div>

                    <div id="notation-akkord" class="notation-display"></div>
                    
                    <div class="controls">
                        <button class="btn-primary" id="play-akkord" onclick="playAkkord()">‚ñ∂ Abspielen</button>
                        <button class="btn-secondary" id="replay-akkord" onclick="playAkkord()" disabled>üîÑ Wiederholen</button>
                    </div>

                    <div class="answer-section" id="akkord-answer-section" style="display: none;">
                        <h3>Welchen Akkord h√∂rst du?</h3>
                        <div class="button-grid">
                            <button class="answer-btn" onclick="checkAkkord('Durdreiklang')">Durdreiklang (D)</button>
                            <button class="answer-btn" onclick="checkAkkord('Molldreiklang')">Molldreiklang (M)</button>
                            <button class="answer-btn" onclick="checkAkkord('√úberm√§√üiger Dreiklang')">√úberm√§√üiger Dreiklang (√º)</button>
                            <button class="answer-btn" onclick="checkAkkord('D7')">D7</button>
                            <button class="answer-btn" onclick="checkAkkord('Dmaj7')">Dmaj7</button>
                            <button class="answer-btn" onclick="checkAkkord('M7')">M7</button>
                            <button class="answer-btn" onclick="checkAkkord('v7')">v7</button>
                            <button class="answer-btn" onclick="checkAkkord('D56')">D5/6</button>
                            <button class="answer-btn" onclick="checkAkkord('M56')">M5/6</button>
                        </div>
                    </div>

                    <div class="feedback" id="akkord-feedback"></div>
                    
                    <button class="btn-primary" id="next-akkord" onclick="nextAkkord()" style="display: none;">N√§chster Akkord ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Melodiediktat -->
        <div id="melodie-screen" class="screen">
            <div class="container">
                <button class="back-button" onclick="goHome()">‚Üê Zur√ºck</button>
                
                <h1>Melodiediktat</h1>
                
                <div class="stats-bar">
                    <span>Gesamt: <strong id="melodie-total">0</strong></span>
                </div>

                <div class="exercise-area">
                    <div class="warning-box">
                        <p><strong>‚ö†Ô∏è Hinweis:</strong> Das Melodiediktat funktioniert aktuell noch nicht vollst√§ndig korrekt. Die Rhythmen und T√∂ne entsprechen m√∂glicherweise nicht den exakten BW-Vorgaben. Bitte verwende diese √úbung mit Vorsicht und vergleiche mit anderen Quellen!</p>
                    </div>
                    
                    <div class="info-box">
                        <p><strong>Tonart:</strong> <span id="melodie-tonart"></span></p>
                        <p><strong>Anfangston:</strong> <span id="melodie-startton"></span></p>
                        <p><em>Notiere die Melodie auf Notenpapier!</em></p>
                    </div>

                    <div id="notation-melodie" class="notation-display"></div>
                    
                    <div class="controls">
                        <button class="btn-primary" id="play-melodie" onclick="playMelodie()">‚ñ∂ Start: Kadenz + Vorz√§hlen + Takt 1-4</button>
                        <button class="btn-primary" id="continue-melodie" onclick="continueMelodie()" style="display: none;">Weiter ‚ñ∂</button>
                    </div>

                    <div class="answer-section">
                        <button class="btn-primary" id="show-melodie-solution" onclick="showMelodieSolution()" style="display: none;">L√∂sung anzeigen</button>
                    </div>

                    <div class="feedback" id="melodie-feedback"></div>
                    
                    <button class="btn-primary" id="next-melodie" onclick="nextMelodie()" style="display: none;">N√§chste Melodie ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- Rhythmusdiktat -->
        <div id="rhythmus-screen" class="screen">
            <div class="container">
                <button class="back-button" onclick="goHome()">‚Üê Zur√ºck</button>
                
                <h1>Rhythmusdiktat</h1>
                
                <div class="stats-bar">
                    <span>Gesamt: <strong id="rhythmus-total">0</strong></span>
                </div>

                <div class="exercise-area">
                    <div class="info-box">
                        <p><strong>Taktart:</strong> 4/4-Takt</p>
                        <p><strong>Umfang:</strong> 4 Takte</p>
                        <p><strong>Tempo:</strong> Viertel = ca. 60</p>
                        <p><em>Enth√§lt: Synkopen, Triolen, Punktierungen</em></p>
                        <p><em>Notiere den Rhythmus auf Notenpapier!</em></p>
                    </div>

                    <div id="notation-rhythmus" class="notation-display"></div>
                    
                    <div class="controls">
                        <button class="btn-primary" id="play-rhythmus" onclick="playRhythmus()">‚ñ∂ Start: Vorz√§hlen + Takt 1-4</button>
                        <button class="btn-primary" id="continue-rhythmus" onclick="continueRhythmus()" style="display: none;">Weiter ‚ñ∂</button>
                    </div>

                    <div class="answer-section">
                        <button class="btn-primary" id="show-rhythmus-solution" onclick="showRhythmusSolution()" style="display: none;">L√∂sung anzeigen</button>
                    </div>

                    <div class="feedback" id="rhythmus-feedback"></div>
                    
                    <button class="btn-primary" id="next-rhythmus" onclick="nextRhythmus()" style="display: none;">N√§chster Rhythmus ‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vexflow@4.2.3/build/cjs/vexflow.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/notation.js"></script>
    <script src="js/intervalle.js"></script>
    <script src="js/akkorde.js"></script>
    <script src="js/melodie.js"></script>
    <script src="js/rhythmus.js"></script>
    <script src="js/themes.js"></script>
    <script src="js/app.js"></script>
</body>
</html>